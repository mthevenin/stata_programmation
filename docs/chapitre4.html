<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Programmation avec Stata - 4&nbsp; Les bases de données</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapitre5.html" rel="next">
<link href="./chapitre3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Programmation avec Stata</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Basculer la navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mthevenin.github.io/stata_fr/index.html" rel="" target="">
 <span class="menu-text">Stata Ined</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mthevenin.github.io/stata_fr/articles/" rel="" target="">
 <span class="menu-text">Articles</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-formations" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Formations</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-formations">    
        <li>
    <a class="dropdown-item" href="https://mthevenin.github.io/stata_programmation/" rel="" target="">
 <span class="dropdown-text">Formation initiale</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://mthevenin.github.io/stata_graphiques/" rel="" target="">
 <span class="dropdown-text">Graphiques</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/mthevenin/stata_programmation" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./stata_programmation.pdf" rel="" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapitre4.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">**Les bases de données**</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
        <div class="sidebar-tools-collapse">
    <a href="https://github.com/mthevenin" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="mailto:marc.thevenin@ined.fr" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><strong>Présentation de la formation</strong></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title"><strong>Présentation de Stata</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title"><strong>L’environnement</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><strong>Le langage Stata</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title"><strong>Les bases de données</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Les variables</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title"><strong>Manipulations des bases de données</strong></span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapitre7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Analyse statistique avec Stata</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#affectation-du-répertoire-de-travail" id="toc-affectation-du-répertoire-de-travail" class="nav-link active" data-scroll-target="#affectation-du-répertoire-de-travail"><span class="header-section-number">4.1</span> <strong>Affectation du répertoire de travail</strong></a></li>
  <li><a href="#ouverture-et-sauvegarde-dune-base" id="toc-ouverture-et-sauvegarde-dune-base" class="nav-link" data-scroll-target="#ouverture-et-sauvegarde-dune-base"><span class="header-section-number">4.2</span> <strong>Ouverture et sauvegarde d’une base</strong></a>
  <ul class="collapse">
  <li><a href="#ouverture" id="toc-ouverture" class="nav-link" data-scroll-target="#ouverture"><span class="header-section-number">4.2.1</span> Ouverture</a></li>
  <li><a href="#sauvegarde" id="toc-sauvegarde" class="nav-link" data-scroll-target="#sauvegarde"><span class="header-section-number">4.2.2</span> Sauvegarde</a></li>
  <li><a href="#autres-formats" id="toc-autres-formats" class="nav-link" data-scroll-target="#autres-formats"><span class="header-section-number">4.2.3</span> Autres formats</a></li>
  </ul></li>
  <li><a href="#création-dune-base-de-donnée-ajout-dobservations" id="toc-création-dune-base-de-donnée-ajout-dobservations" class="nav-link" data-scroll-target="#création-dune-base-de-donnée-ajout-dobservations"><span class="header-section-number">4.3</span> Création d’une base de donnée, ajout d’observations</a></li>
  <li><a href="#décrire-le-contenu-dune-base" id="toc-décrire-le-contenu-dune-base" class="nav-link" data-scroll-target="#décrire-le-contenu-dune-base"><span class="header-section-number">5</span> <strong>Décrire le contenu d’une base</strong></a>
  <ul class="collapse">
  <li><a href="#commande-describe" id="toc-commande-describe" class="nav-link" data-scroll-target="#commande-describe"><span class="header-section-number">5.0.1</span> Commande <code>describe</code></a></li>
  <li><a href="#autres-commandes" id="toc-autres-commandes" class="nav-link" data-scroll-target="#autres-commandes"><span class="header-section-number">5.0.2</span> Autres commandes</a></li>
  <li><a href="#tri-doublon-position-des-variables" id="toc-tri-doublon-position-des-variables" class="nav-link" data-scroll-target="#tri-doublon-position-des-variables"><span class="header-section-number">5.1</span> <strong>Tri, doublon, position des variables</strong></a>
  <ul class="collapse">
  <li><a href="#tri-dune-base" id="toc-tri-dune-base" class="nav-link" data-scroll-target="#tri-dune-base"><span class="header-section-number">5.1.1</span> Tri d’une base</a></li>
  <li><a href="#repérage-et-suppression-des-doublons" id="toc-repérage-et-suppression-des-doublons" class="nav-link" data-scroll-target="#repérage-et-suppression-des-doublons"><span class="header-section-number">5.1.2</span> Repérage et suppression des doublons</a></li>
  <li><a href="#modifier-la-place-des-variables-dans-la-base" id="toc-modifier-la-place-des-variables-dans-la-base" class="nav-link" data-scroll-target="#modifier-la-place-des-variables-dans-la-base"><span class="header-section-number">5.1.3</span> Modifier la place des variables dans la base</a></li>
  </ul></li>
  <li><a href="#description-statistique-des-variables" id="toc-description-statistique-des-variables" class="nav-link" data-scroll-target="#description-statistique-des-variables"><span class="header-section-number">5.2</span> <strong>Description statistique des variables</strong></a>
  <ul class="collapse">
  <li><a href="#variables-quantitatives" id="toc-variables-quantitatives" class="nav-link" data-scroll-target="#variables-quantitatives"><span class="header-section-number">5.2.1</span> Variables quantitatives</a></li>
  <li><a href="#variables-catégorielles" id="toc-variables-catégorielles" class="nav-link" data-scroll-target="#variables-catégorielles"><span class="header-section-number">5.2.2</span> Variables catégorielles</a></li>
  </ul></li>
  <li><a href="#introduction-aux-frames" id="toc-introduction-aux-frames" class="nav-link" data-scroll-target="#introduction-aux-frames"><span class="header-section-number">5.3</span> <strong>Introduction aux frames</strong></a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/mthevenin/stata_programmation/edit/main/chapitre4.qmd" class="toc-action">Modifier cette page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title"><strong>Les bases de données</strong></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><a href="https://mthevenin.github.io/stata_programmation/programme4.do"><strong>Programme du chapitre</strong></a></p>
<p><em>Commandes et expressions introduites</em></p>
<table class="table">
<colgroup>
<col style="width: 29%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>SECTION</th>
<th>COMMANDES ET EXPRESSIONS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Affectation d’un répertoire de travail</strong></td>
<td><code>cd</code></td>
</tr>
<tr class="even">
<td><strong>Ouverture et sauvegarde d’une base</strong></td>
<td><code>use</code> <code>webuse [set]</code> <code>sysuse</code> <code>save</code> <code>saveold</code> <code>import</code> <code>export</code> <strong><code>usesas</code></strong> <strong><code>savasas</code></strong> <code>set obs</code> <code>insobs</code></td>
</tr>
<tr class="odd">
<td><strong>Décrire le contenu d’une base</strong></td>
<td><code>describe</code> <code>list</code> <code>codebook</code> <code>labelbook</code> <code>label list</code></td>
</tr>
<tr class="even">
<td><strong>Tri, doublon, position des variables</strong></td>
<td><code>sort</code> <code>gsort</code> <code>duplicates</code> <code>order</code></td>
</tr>
<tr class="odd">
<td><strong>Decription statistique des variables</strong></td>
<td><code>summarize</code> <code>mean</code> <code>tabstat</code> <strong><code>violinplot</code></strong> <strong><code>heatplot</code></strong> <strong><code>gjoint</code></strong> <code>tabulate</code> <strong><code>fre</code></strong> <strong><code>tabm</code></strong> <strong><code>catplot</code></strong></td>
</tr>
<tr class="even">
<td><strong>Introductions aux frames</strong></td>
<td><code>frame dir</code> <code>frame list</code> <code>frame create</code> <code>frame rename</code> <code>frame copy</code> <code>frame change</code> <code>frame drop</code> <code>frame reset</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>En gras, commandes externes</strong></li>
<li><em>En italique, commandes associées à un chapitre ultérieur</em></li>
</ul>
<section id="affectation-du-répertoire-de-travail" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="affectation-du-répertoire-de-travail"><span class="header-section-number">4.1</span> <strong>Affectation du répertoire de travail</strong></h2>
<p>La commande <code>cd</code> (Current Directory), permet d’indiquer le chemin d’accès du répertoire où se trouve la base à ouvrir ou à enregistrer. Si aucun chemin d’accès n’est spécifié, Stata ira chercher la base dans le répertoire par défaut (normalement C: ou D:).</p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>cd "path"</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Remarque</strong><br>
Avec cette commande, un seul repertoire de travail est actif. On peut élargir les possibilités en affectant des répertoires avec des macros variables locales ou globales</p>
</section>
<section id="ouverture-et-sauvegarde-dune-base" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="ouverture-et-sauvegarde-dune-base"><span class="header-section-number">4.2</span> <strong>Ouverture et sauvegarde d’une base</strong></h2>
<section id="ouverture" class="level3" data-number="4.2.1">
<h3 data-number="4.2.1" class="anchored" data-anchor-id="ouverture"><span class="header-section-number">4.2.1</span> Ouverture</h3>
<p><strong>Commande</strong> <code>use</code></p>
<p>Syntaxe sans chargement d’un répertoire:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>use "path/nom_base.dta" <span class="co">[</span><span class="ot">,clear</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>L’option <code>clear</code> permet d’effacer une base en cours d’utilisation. Il est conseillé de mettre cette option systématiquement. On peut également utiliser <code>clear</code> comme instruction avant d’ouvrir une base. on ne supprime pas la base du répertoire (commande <code>erase</code>), elle est juste écrasée dans la session.</p>
<p>Syntaxe avec affectation d’un répertoire:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cd "path"</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>use "nom_base.dta", clear </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cd "path"</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>clear</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>use "nom_base.dta" </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Remarque: pour les bases d’exemples préinstallées, on utilise la commande <code>sysuse</code>. Dans les fichiers d’aide, des exemples font également appels a des bases localisées sur des serveurs qui s’ouvrent avec la commande <code>webuse</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sysuse auto, clear</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Ouverture d’une base stockée sur un git [github, gitlab …]</strong></p>
<p>Dans un premier temps, comme pour <code>cd</code> il faut charger le répertoire où se trouve localisé la base, avec la commande <strong><code>webuse set</code></strong>. Par exemple sur mon dépôt git, une base d’exemple (<em>logement.dta</em>) pour une commande se trouve à cette adresse: <a href="https://github.com/mthevenin/stata_graphiques/tree/main/programmation/gjoint" class="uri">https://github.com/mthevenin/stata_graphiques/tree/main/programmation/gjoint</a></p>
<p>Pour charger ce répertoire à distance:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>webuse set  "https://raw.githubusercontent.com//mthevenin/stata_graphiques/master/ressources/gjoint"</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On remarque que le chemin n’est pas identique au simple lien (spécificité des dépôt de type git).</p>
<p>Il suffit ensuite de charger la base avec <code>webuse</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>webuse logement.dta, clear</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>On revient au dépôt officiel de stata avec <code>webuse set</code></p>
<p>En résumé avec un seul bloc d’instructions:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span>  <span class="st">"https://raw.githubusercontent.com//mthevenin/stata_graphiques/master/ressources/gjoint"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="st">"logement.dta"</span>, <span class="kw">clear</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>div.jp-Notebook .datagrid-container {min-height: 448px; }</style>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>(prefix now "https://raw.githubusercontent.com//mthevenin/stata_graphiques/mast
&gt; er/ressources/gjoint")</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>(prefix now "https://www.stata-press.com/data/r18")</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="sauvegarde" class="level3" data-number="4.2.2">
<h3 data-number="4.2.2" class="anchored" data-anchor-id="sauvegarde"><span class="header-section-number">4.2.2</span> Sauvegarde</h3>
<p><strong>Commandes</strong> <code>save</code> ou <code>saveold</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>save "path/nom_base.dta" <span class="co">[</span><span class="ot">, replace</span><span class="co">]</span>     </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>L’option <code>replace</code> permet d’écraser une version antérieure de la base. Obligatoire à partir de la 2ème sauvegarde, mais on peut l’utiliser dès la première sauvegarde (un message d’avertissement s’affiche).</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span>  </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> auto, <span class="kw">replace</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)
file auto.dta saved</code></pre>
</div>
</div>
<p><code>saveold</code> permettra d’ouvrir une bases avec une version ancienne de Stata non compatibles avec la version courante. Cela commence à devenir moins critique, mais avec <code>save</code> il ne sera plus possible d’ouvrir une base avec une version inférieure à la 13 ou inférieur à la 13 (passage à l’encodage Utf8 avec la version 14).</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a> saveold "path/nom_base.dta", <span class="co">[</span><span class="ot">replace</span><span class="co">] [version(#)]</span> // # = numéro de la version de Stata: </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Remarque:</p>
<ul>
<li>Ecrire l’extension .dta n’est pas obligatoire</li>
<li>Les doubles quotes ne sont obligatoires que s’il y a un espace dans le chemin d’accès et/ou dans le nom de la base</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>use "ma base", clear </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>use ma_base,   clear</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="autres-formats" class="level3" data-number="4.2.3">
<h3 data-number="4.2.3" class="anchored" data-anchor-id="autres-formats"><span class="header-section-number">4.2.3</span> Autres formats</h3>
<section id="importationexportation" class="level4" data-number="4.2.3.1">
<h4 data-number="4.2.3.1" class="anchored" data-anchor-id="importationexportation"><span class="header-section-number">4.2.3.1</span> Importation/Exportation</h4>
<p><strong>Excel et fichiers textes (.txt, .csv)</strong><br>
<br></p>
<ul>
<li>Le plus simple est passer par le menu: files + [<em>Import</em> ou <em>Export</em>] qui dispose d’une fenêtre de prévisualisation.
<ul>
<li>Pour excel les commandes sont <code>import excel</code> et <code>export excel</code></li>
<li>Pour des fichiers textes type csv (R), les commandes sont <code>import delimited</code> et <code>export delimited</code></li>
</ul></li>
</ul>
<p>**Exemples</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>exportation csv</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>export delimited using "D:\D\stata_temp\export_csv.csv", replace</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>exportation xls</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>export excel using "D:\D\stata_temp\export_excel.xls", firstrow(variables) replace</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>importation cxv</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>import delimited "D:\D\stata_temp\export_csv.csv",  clear</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>importation xls</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>import excel "D:\D\stata_temp\export_excel.xls", sheet("Sheet1") firstrow clear</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>SAS</strong></p>
<ul>
<li>Depuis la version 16 de Stata il est possible d’importer directement des formats <code>sas7bdat</code>. Pas d’exportation possible.</li>
<li>Pour les versions antérieure, la solution installée via <em>sasxport</em> n’est pas satisfaisante. Il est alors conseillé d’utiliser le package externe <code>savasas</code>
<ul>
<li>Sas =&gt; Stata [importation]: commande <code>usesas</code><br>
</li>
<li>Stata =&gt; Sas [exportation] : commande <code>savasas</code></li>
<li>Si le chemin d’accès à l’exécutable de SAS Windows n’est pas reconnu, il faut récupérer et éditer le fichier sasexe.do (à partir de la ligne 169), dont l’accès est donné dans le fichier d’aide.<br>
</li>
<li>Pour l’exportation, on peut générer un catalogue de format,en dur, avec l’option <code>format</code>.</li>
</ul></li>
</ul>
<p><strong>SPSS</strong></p>
<ul>
<li>Depuis la dernière version de Stata (16), il est possible d’importer directement des bases de ce format.</li>
<li>Pas de possibilité d’exportation directe.</li>
</ul>
</section>
</section>
</section>
<section id="création-dune-base-de-donnée-ajout-dobservations" class="level2 callout-info" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="création-dune-base-de-donnée-ajout-dobservations"><span class="header-section-number">4.3</span> Création d’une base de donnée, ajout d’observations</h2>
<p>On peut créer une base de donnée, “vide”, avec la commande <strong><code>set obs n_obs</code></strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>clear </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>set obs 100</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A une base existante, on peut ajouter des observations (en valeurs manquante) avec la commande <code>insobs nbre_observation</code>. Par défaut ces observations s’ajouteront après la dernière ligne (option <code>before/after(position)</code> pour renseigner la position de la première observation ajoutée.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>insobs 10  // ajout de 10 observations à la base</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="décrire-le-contenu-dune-base" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> <strong>Décrire le contenu d’une base</strong></h1>
<section id="commande-describe" class="level3" data-number="5.0.1">
<h3 data-number="5.0.1" class="anchored" data-anchor-id="commande-describe"><span class="header-section-number">5.0.1</span> Commande <code>describe</code></h3>
<p>Permet, sous forme de tableau, d’avoir des renseignement sur une base de donnée: taille en mémoire, nombre d’observations, descriptif des variables (nom, format, labels). La commande est régulièrement tronquée jusqu’à <code>des</code></p>
<p><strong>Base courante (ouverte)</strong></p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>describe <span class="co">[</span><span class="ot">varlist , short</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto.dta, <span class="kw">clear</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span> </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)

Contains data from C:\Program Files\Stata18/ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            12                  13 Apr 2022 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
make            str18   %-18s                 Make and model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
rep78           int     %8.0g                 Repair record 1978
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
foreign         byte    %8.0g      origin     Car origin
-------------------------------------------------------------------------------
Sorted by: foreign</code></pre>
</div>
</div>
<p><strong>Base stockée (non ouverte)</strong></p>
<p>On peut également décrire le contenu d’une base en format .dta en mémoire et non ouverte avec l’argument <code>using "path/nombase"</code></p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">describe</span> <span class="kw">using</span>  <span class="st">"https://www.stata-press.com/data/r17/census2.dta"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Contains data                                 1980 Census data by state
 Observations:            50                  2 Dec 2020 09:21
    Variables:            15                  
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
state           str13   %-13s                 State
state2          str2    %-2s                  Two-letter state abbreviation
region          byte    %-8.0g     cenreg     Census region
pop             long    %12.0gc               Population
poplt5          long    %12.0gc               Pop, &lt; 5 year
pop5_17         long    %12.0gc               Pop, 5 to 17 years
pop18p          long    %12.0gc               Pop, 18 and older
pop65p          long    %12.0gc               Pop, 65 and older
popurban        long    %12.0gc               Urban population
medage          float   %9.2f                 Median age
death           long    %12.0gc               Number of deaths
marriage        long    %12.0gc               Number of marriages
divorce         long    %12.0gc               Number of divorces
drate           int     %9.0g                 Deathrate
age             byte    %9.0g                 Age
-------------------------------------------------------------------------------
Sorted by: </code></pre>
</div>
</div>
</section>
<section id="autres-commandes" class="level3" data-number="5.0.2">
<h3 data-number="5.0.2" class="anchored" data-anchor-id="autres-commandes"><span class="header-section-number">5.0.2</span> Autres commandes</h3>
<ul>
<li><strong>Affichage de la base dans l’output</strong></li>
</ul>
<p>Commande <code>list</code></p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a> list <span class="co">[</span><span class="ot">varlist</span><span class="co">] [expression]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> price mpg turn foreign <span class="kw">in</span> 1/10</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     +--------------------------------+
     |  price   mpg   turn    foreign |
     |--------------------------------|
  1. |  4,099    22     40   Domestic |
  2. |  4,749    17     40   Domestic |
  3. |  3,799    22     35   Domestic |
  4. |  4,816    20     40   Domestic |
  5. |  7,827    15     43   Domestic |
     |--------------------------------|
  6. |  5,788    18     43   Domestic |
  7. |  4,453    26     34   Domestic |
  8. |  5,189    20     42   Domestic |
  9. | 10,372    16     43   Domestic |
 10. |  4,082    19     42   Domestic |
     +--------------------------------+</code></pre>
</div>
</div>
<p>Sauf exceptions, comme la petite base d’exemple utilisée ici, penser à bien filtrer les informations souhaitées en termes de variables et d’observations.</p>
<ul>
<li><strong>Information sur les labels affectés aux variables</strong></li>
</ul>
<p>Commande <code>labelbook</code> et <code>label list</code></p>
<p><code>labelbook</code>: affiche les informations sur les labels affectés aux modalités des variables.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>labelbook <span class="co">[</span><span class="ot">nom_label</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">labelbook</span> origin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-------------------------------------------------------------------------------
Value label origin 
-------------------------------------------------------------------------------

      Values                                    Labels
       Range:  [0,1]                     String length:  [7,8]
           N:  2                 Unique at full length:  yes
        Gaps:  no                  Unique at length 12:  yes
  Missing .*:  0                           Null string:  no
                               Leading/trailing blanks:  no
                                    Numeric -&gt; numeric:  no
  Definition
           0   Domestic
           1   Foreign

   Variables:  foreign
</code></pre>
</div>
</div>
<p><code>label list [nom_label]</code> donne seulement l’affectation des labels aux valeurs.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="ot">list</span> origin</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>origin:
           0 Domestic
           1 Foreign</code></pre>
</div>
</div>
</section>
<section id="tri-doublon-position-des-variables" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="tri-doublon-position-des-variables"><span class="header-section-number">5.1</span> <strong>Tri, doublon, position des variables</strong></h2>
<section id="tri-dune-base" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="tri-dune-base"><span class="header-section-number">5.1.1</span> Tri d’une base</h3>
<p>Commande <code>sort</code></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>sort varlist</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>La commande <code>sort</code> n’effectue que des tris croissants. Pour faire un tri décroissant, on peut utiliser la commande <code>gsort</code>. Tris croissants et décroissant peuvent se succéder dans une logique de cluster.
<ul>
<li><code>sort varlist</code> =&gt; tri croissant</li>
<li><code>gsort + var1</code> =&gt; croissant <em>var1</em></li>
<li><code>gsort - var1</code> =&gt; décroissant <em>var1</em></li>
<li><code>gsort + var1 - var2</code> =&gt; croissant <em>var1</em> et décroissant <em>var2</em> dans chaque strate de <em>var1</em></li>
</ul></li>
<li>Le tri d’une peut/doit être réalisé lorsqu’on veut répéter une instruction avec le préfixe <code>bysort</code>: <code>bysort varlist: instruction</code>. Il est imposé lorsqu’on souhaite apparier des bases [voir chapitre 6]</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>tri croissant sur la variable price</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>sort price</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="ss">* </span>tri décroissant sur la variable prix pour chaque niveau de la variable foreign</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>gsort + foreign - price  </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="repérage-et-suppression-des-doublons" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="repérage-et-suppression-des-doublons"><span class="header-section-number">5.1.2</span> Repérage et suppression des doublons</h3>
<p><strong>Repérage et suppression des doublons</strong></p>
<p>Commande <code>duplicates list/tag/drop [varlist]</code></p>
<p>Permet de lister, repérer (avec <code>gen(varname)</code> ) ou supprimer des observations répliquées. Si la liste de variables n’est pas renseignée, elles toutes sont utilisées.</p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>duplicates list <span class="co">[</span><span class="ot">varlist</span><span class="co">]</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>duplicates tag <span class="co">[</span><span class="ot">varlist</span><span class="co">]</span>, gen(var)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>duplicates drop <span class="co">[</span><span class="ot">varlist</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="modifier-la-place-des-variables-dans-la-base" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="modifier-la-place-des-variables-dans-la-base"><span class="header-section-number">5.1.3</span> Modifier la place des variables dans la base</h3>
<p>Commande <code>order</code></p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>order varlist, <span class="co">[</span><span class="ot">first/last</span><span class="co">] [after/before(varname)]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> foreign, first</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> rep78, after(foreign)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Contains data from C:\Program Files\Stata18/ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            12                  13 Apr 2022 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
foreign         byte    %8.0g      origin     Car origin
rep78           int     %8.0g                 Repair record 1978
make            str18   %-18s                 Make and model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
-------------------------------------------------------------------------------
Sorted by: foreign</code></pre>
</div>
</div>
<p>Cette opération est particulièrement pour organiser sa base de données après la création de nouvelles variables.</p>
</section>
</section>
<section id="description-statistique-des-variables" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="description-statistique-des-variables"><span class="header-section-number">5.2</span> <strong>Description statistique des variables</strong></h2>
<p>Dans les menus de l’interface principale: <strong>Statistics</strong> =&gt; <strong>Summaries, tables &amp; tests</strong></p>
<section id="variables-quantitatives" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="variables-quantitatives"><span class="header-section-number">5.2.1</span> Variables quantitatives</h3>
<section id="tableaux-dindicateurs" class="level4" data-number="5.2.1.1">
<h4 data-number="5.2.1.1" class="anchored" data-anchor-id="tableaux-dindicateurs"><span class="header-section-number">5.2.1.1</span> Tableaux d’indicateurs</h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les commandes qui sont rapidement décrites afficheront des indicateurs communs, typiquement la moyenne. Elles se distinguent par la forme de leur output facilitant plus ou moins les comparaisons, les possibilités offertes en termes de pondération, et sur la récupération des résultats (macro).</p>
</div>
</div>
<p><strong>Commande <code>summarize</code></strong></p>
<p>Comme son l’indique, la commande <code>summarize</code>, avec l’option <code>detail</code> (<code>d</code>) donne un résumé complet de la distribution d’une variable quantitative: moyenne, variance, quantiles, symétrie, applatissement ..nom l’indique l.)</p>
<p><strong>Syntaxe</strong>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>summarize varlist <span class="co">[</span><span class="ot">, detail</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si on indique pas le nom d’au moins une variable, toutes les variables de la base seront sélectionnées.</p>
<p>La commande peut-être tronquée jusqu’à <code>sum</code> [<strong>Warning</strong>: il existe également une fonction <code>sum</code> pour générer des cumuls lors d’une création de variable - voir chapitre 5].</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> price</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         74    6165.257    2949.496       3291      15906

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
     foreign |         74    .2972973    .4601885          0          1
       rep78 |         69    3.405797    .9899323          1          5
        make |          0
       price |         74    6165.257    2949.496       3291      15906
         mpg |         74     21.2973    5.785503         12         41
-------------+---------------------------------------------------------
    headroom |         74    2.993243    .8459948        1.5          5
       trunk |         74    13.75676    4.277404          5         23
      weight |         74    3019.459    777.1936       1760       4840
      length |         74    187.9324    22.26634        142        233
        turn |         74    39.64865    4.399354         31         51
-------------+---------------------------------------------------------
displacement |         74    197.2973    91.83722         79        425
  gear_ratio |         74    3.014865    .4562871       2.19       3.89</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> price <span class="fu">length</span>, <span class="kw">d</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3291           3291
 5%         3748           3299
10%         3895           3667       Obs                  74
25%         4195           3748       Sum of wgt.          74

50%       5006.5                      Mean           6165.257
                        Largest       Std. dev.      2949.496
75%         6342          13466
90%        11385          13594       Variance        8699526
95%        13466          14500       Skewness       1.653434
99%        15906          15906       Kurtosis       4.819188

                        Length (in.)
-------------------------------------------------------------
      Percentiles      Smallest
 1%          142            142
 5%          154            147
10%          157            149       Obs                  74
25%          170            154       Sum of wgt.          74

50%        192.5                      Mean           187.9324
                        Largest       Std. dev.      22.26634
75%          204            221
90%          218            222       Variance       495.7899
95%          221            230       Skewness      -.0409746
99%          233            233       Kurtosis        2.04156</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> foreign: <span class="kw">sum</span> price, <span class="kw">d</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-------------------------------------------------------------------------------
-&gt; foreign = Domestic

                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3291           3291
 5%         3667           3299
10%         3955           3667       Obs                  52
25%         4184           3799       Sum of wgt.          52

50%       4782.5                      Mean           6072.423
                        Largest       Std. dev.      3097.104
75%         6234          13466
90%        11385          13594       Variance        9592055
95%        13594          14500       Skewness       1.777939
99%        15906          15906       Kurtosis       5.090316

-------------------------------------------------------------------------------
-&gt; foreign = Foreign

                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3748           3748
 5%         3798           3798
10%         3895           3895       Obs                  22
25%         4499           3995       Sum of wgt.          22

50%         5759                      Mean           6384.682
                        Largest       Std. dev.      2621.915
75%         7140           9690
90%         9735           9735       Variance        6874439
95%        11995          11995       Skewness       1.215236
99%        12990          12990       Kurtosis       3.555178
</code></pre>
</div>
</div>
<ul>
<li><strong><em>Avantage</em></strong>: récupération des résultats sous forme de macro rapide.</li>
<li><strong><em>Inconvénients</em></strong>: pas de sélection des indicateurs avec l’option <code>detail</code>, output pas adapté aux comparaisons.</li>
</ul>
<p><strong>Extrait de l’aide summarize (<code>help summarize</code></strong>)</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="in">    summarize stores the following in r():</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="in">    Scalars   </span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="in">      r(N)           number of observations</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="in">      r(mean)        mean</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="in">      r(skewness)    skewness (detail only)</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="in">      r(min)         minimum</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="in">      r(max)         maximum</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="in">      r(sum_w)       sum of the weights</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p1)          1st percentile (detail only)</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p5)          5th percentile (detail only)</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p10)         10th percentile (detail only)</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p25)         25th percentile (detail only)</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p50)         50th percentile (detail only)</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p75)         75th percentile (detail only)</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p90)         90th percentile (detail only)</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p95)         95th percentile (detail only)</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a><span class="in">      r(p99)         99th percentile (detail only)</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="in">      r(Var)         variance</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a><span class="in">      r(kurtosis)    kurtosis (detail only)</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a><span class="in">      r(sum)         sum of variable</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="in">      r(sd)          standard deviation</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Informations enregistrées pour la variable <em>price</em></p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">qui</span> <span class="kw">sum</span> price, <span class="kw">d</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span> <span class="ot">list</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
scalars:
                  r(N) =  74
              r(sum_w) =  74
               r(mean) =  6165.256756756757
                r(Var) =  8699525.97426879
                 r(sd) =  2949.495884768919
           r(skewness) =  1.653433511704859
           r(kurtosis) =  4.819187528464004
                r(sum) =  456229
                r(min) =  3291
                r(max) =  15906
                 r(p1) =  3291
                 r(p5) =  3748
                r(p10) =  3895
                r(p25) =  4195
                r(p50) =  5006.5
                r(p75) =  6342
                r(p90) =  11385
                r(p95) =  13466
                r(p99) =  15906</code></pre>
</div>
</div>
<p><strong><code>mean</code></strong></p>
<p>N’affiche que la moyenne et ses statistiques associées. L’option <code>over</code> permet de comparer les valeurs moyennes des modalités d’une variable catégorielle (<code>over(varname)</code>) ou un croisement des modalités de plusieurs variables (<code>over(varlist)</code>)</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price  </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price, <span class="bn">over</span>(foreign)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mean estimation                             Number of obs = 74
</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>             |       Mean   Std. err.     [95% conf. interval]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>-------------+------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>       price |</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   6165.257    342.872      5481.914    6848.600</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mean estimation                                Number of obs = 74

-----------------------------------------------------------------
                |       Mean   Std. err.     [95% conf. interval]
----------------+------------------------------------------------
c.price@foreign |
      Domestic  |</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   6072.423    429.491      5216.449    6928.398
       Foreign  |   6384.682    558.994      5270.608    7498.756
-----------------------------------------------------------------</code></pre>
</div>
</div>
<ul>
<li><strong>Avantage</strong>: output synthétique si la moyenne de plusieurs groupes comparées</li>
<li><strong>Inconvénients</strong>: récupération des résultats via une matrice (on oublie)</li>
</ul>
<p><strong><code>tabstat</code></strong></p>
<p>Permet de sélectionner les indicateurs avec l’option <code>stat()</code> (par défaut la moyenne). L’option <code>by()</code> permet de comparer le ou les indicateurs pour chaque niveau d’une variable catégorielle. Dans ce cas <code>tabstat</code> affiche également les résultats sur l’ensemble des observations (sinon ajouter l’option <code>nototal</code>).</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> price  </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> price, <span class="kw">by</span>(foreign)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Variable |      Mean
-------------+----------
       price |  6165.257
------------------------

Summary for variables: price
Group variable: foreign (Car origin)

 foreign |      Mean
---------+----------
Domestic |  6072.423
 Foreign |  6384.682
---------+----------
   Total |  6165.257
--------------------</code></pre>
</div>
</div>
<p><strong>Extrait de l’aide tabstat (<code>help tabstat</code></strong>)</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>        mean            mean</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>        count           count of nonmissing observations</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>        n               same as count</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>        sum             sum</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>        max             maximum</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>        min             minimum</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>        range           range = max - min</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>        sd              standard deviation</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>        variance        variance</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>        cv              coefficient of variation (sd/mean)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>        semean          standard error of mean (sd/sqrt(n))</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>        skewness        skewness</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>        kurtosis        kurtosis</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>        p1              1st percentile</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>        p5              5th percentile</span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>        p10             10th percentile</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>        p25             25th percentile</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>        median          median (same as p50)</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>        p50             50th percentile (same as median)</span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>        p75             75th percentile</span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>        p90             90th percentile</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>        p95             95th percentile</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>        p99             99th percentile</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>        iqr             interquartile range = p75 - p25</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>        q               equivalent to specifying p25 p50 p75</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Si on souhaite ajouter la médiane</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> mpg, <span class="kw">by</span>(foreign) stat(<span class="kw">mean</span> <span class="kw">median</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Summary for variables: mpg
Group variable: foreign (Car origin)

 foreign |      Mean       p50
---------+--------------------
Domestic |  19.82692        19
 Foreign |  24.77273      24.5
---------+--------------------
   Total |   21.2973        20
------------------------------</code></pre>
</div>
</div>
</section>
<section id="graphiques" class="level4" data-number="5.2.1.2">
<h4 data-number="5.2.1.2" class="anchored" data-anchor-id="graphiques"><span class="header-section-number">5.2.1.2</span> Graphiques</h4>
<p><strong>[MAJ EN COURS: bcp de nouveautés]</strong></p>
<p>Juste une rapide présentation de quelques visualisations permettant d’explorer des distributions.</p>
<p>Une seule distribution: <strong>graph box/hbox</strong> , <strong>histogram</strong>, <strong><code>violinplot</code></strong> (externe)<br>
Plusieurs distributions: <strong><code>violinplot</code></strong> (externe) Deux distribution croisée: <strong><code>hexplot</code></strong> (externe), <strong><code>gjoint</code></strong> (externe)</p>
<p><strong>Boxplot</strong></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>graph hbox mpg, </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>graph hbox mpg, over(foreign)   </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Sans comparaison"><img src="img4/g1.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Sans comparaison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Avec comparaison"><img src="img4/g2.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Avec comparaison</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Histogramme</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>histogram mpg, percent </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>histogram mpg, percent by(foreign)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Sans comparaison"><img src="img4/g3.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Sans comparaison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Avec comparaison"><img src="img4/g4.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Avec comparaison</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li>Dans le langage de Stata, ce type de graphique est appelé <em>oneway</em>.</li>
<li>L’altération de son aspect avec les options n’est pas très flexible, surtout au niveau des couleurs.</li>
<li>Pour les histogrammes, il y a une version <em>twoway</em> qui permet d’empilé plusieurs histogrammes dans un même graphique, mais généralement la visualisation n’est pas optimale. Préférer en ce cas là une approche par les <strong>densités</strong> (voir <code>violinplot</code> - comparaison III).</li>
<li>Conseil de sémiologie graphique: garder l’axe quantitatif/continu sur les abcisses .</li>
</ul>
<p><strong>Violinplot (Ben Jann)</strong></p>
<p>Toujours beaucoup d’options dans les commandes de <em>magik</em> B.Jann. Se reporter à son tutoriel sur github pour l’installation (nécessite l’installation de dépendances) <a href="https://github.com/benjann/violinplot/">Lien</a></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>violinplot mpg, fill</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>violinplot mpg, nobox over(foreign) left overlay nomedian  dscale(.) </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>violinplot mpg, fill over(foreign)</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>violinplot mpg, fill split(foreign) horizontal</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g5.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Sans comparaison"><img src="img4/g5.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Sans comparaison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g7.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" title="Comparaison I"><img src="img4/g7.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Comparaison I</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g6.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Comparaison II"><img src="img4/g6.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Comparaison II</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g8.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Comparaison III"><img src="img4/g8.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Comparaison III</figcaption>
</figure>
</div>
</div>
</div>
<p><strong>Deux variables quantitatives</strong></p>
<ul>
<li>Une nuage de point pêche rapidement lorsque le nombre d’observations augmente, par exemple audelà de 200.</li>
<li>Solutions:
<ul>
<li>Courbes de niveaux</li>
<li><code>Heatplot</code>/<code>hexplot</code>: l’idée est de visualiser un histogramme “vu du dessuss”, la hauteurs des barres étant données par un différentiel de couleur issues d’une palette séquentielle (du clair au foncé par exemple).</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>ssc install heatplot, replace  </span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Il peut-être intéressant d’ajouté les distributions marginales des deux variables. J’ai programmé une petite commande (encore en version très alpha): <strong><code>gjoint</code></strong>. Tout le mérite revient à B.Jann pour la commande <code>hexplot</code> (j’ai juste combiné <code>hexplot</code> avec des histogrammes).</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>net install gjoint, from("https://raw.githubusercontent.com/mthevenin/stata_graphiques/master/ressources/gjoint/") replace</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb68"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>hexplot price mpg, colors(flare)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>gjoint price mpg, palette(flare)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g9.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="hexplot"><img src="img4/g9.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">hexplot</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g10.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="hexplot"><img src="img4/g10.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">hexplot</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="variables-catégorielles" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="variables-catégorielles"><span class="header-section-number">5.2.2</span> Variables catégorielles</h3>
<p>La principale commande est <code>tabulate</code> (<code>tab</code>). On peut l’utiliser avec des variables de type string.</p>
<p><strong>Syntaxe (tableau croisé)</strong>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>tab var1 var2 <span class="co">[</span><span class="ot">, mis nofreq row col sort ......</span><span class="co">]</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Par défaut, l’ordre d’affichage suis la valeur de la modalité si la variable est de type numérique et l’ordre alphabétique pour une variable de type caractère. On peut utiliser l’option <code>sort</code> pour afficher par ordre croissant des effectifs observés [ou utiliser la commande externe <strong><code>tabsort</code></strong> qui offre plus de possibilités]</p></li>
<li><p>Autres commandes (externe): <strong><code>fre</code></strong> [B.Jann], <strong><code>tabm</code></strong> [NJ.Cox], <strong><code>tabsort</code></strong> [NJ.Cox]</p></li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>ssc install fre</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>ssc install tabsort</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>ssc install tabm</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> rep78, mis</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> rep78, mis <span class="kw">sort</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> rep78 foreign, nolab mis</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>fre rep78 </span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>tabsort rep78</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Repair |
record 1978 |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |          2        2.70        2.70
          2 |          8       10.81       13.51
          3 |         30       40.54       54.05
          4 |         18       24.32       78.38
          5 |         11       14.86       93.24
          . |          5        6.76      100.00
------------+-----------------------------------
      Total |         74      100.00

     Repair |
record 1978 |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |         30       40.54       40.54
          4 |         18       24.32       64.86
          5 |         11       14.86       79.73
          2 |          8       10.81       90.54
          . |          5        6.76       97.30
          1 |          2        2.70      100.00
------------+-----------------------------------
      Total |         74      100.00

    Repair |
    record |      Car origin
      1978 |         0          1 |     Total
-----------+----------------------+----------
         1 |         2          0 |         2 
         2 |         8          0 |         8 
         3 |        27          3 |        30 
         4 |         9          9 |        18 
         5 |         2          9 |        11 
         . |         4          1 |         5 
-----------+----------------------+----------
     Total |        52         22 |        74 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
rep78 -- Repair record 1978
-----------------------------------------------------------
              |      Freq.    Percent      Valid       Cum.
--------------+--------------------------------------------
Valid   1     |          2       2.70       2.90       2.90
        2     |          8      10.81      11.59      14.49
        3     |         30      40.54      43.48      57.97
        4     |         18      24.32      26.09      84.06
        5     |         11      14.86      15.94     100.00
        Total |         69      93.24     100.00           
Missing .     |          5       6.76                      
Total         |         74     100.00                      
-----------------------------------------------------------

     Repair |
record 1978 |      Freq.     Percent        Cum.
------------+-----------------------------------
          3 |         30       43.48       43.48
          4 |         18       26.09       69.57
          5 |         11       15.94       85.51
          2 |          8       11.59       97.10
          1 |          2        2.90      100.00
------------+-----------------------------------
      Total |         69      100.00</code></pre>
</div>
</div>
<p><strong>Graphiques</strong></p>
<p>Niveau graphique, les possibilités restent toujours assez limitées pour les variables discrètes (et on abandonne l’idée des horribles camemberts).</p>
<p>On privilégiera ici la commande de NJ.Cox, <strong><code>catplot</code></strong></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>ssc install catplot</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>catplot rep78, <span class="kw">percent</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>catplot rep78, <span class="kw">percent</span> <span class="bn">over</span>(foreign)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="chapitre4_files/figure-html/cell-18-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="chapitre4_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g11.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" title="Sans comparaison"><img src="img4/g11.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Sans comparaison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g12.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" title="Avec comparaison"><img src="img4/g12.png" class="img-fluid figure-img"></a></p>
<figcaption class="figure-caption">Avec comparaison</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="introduction-aux-frames" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="introduction-aux-frames"><span class="header-section-number">5.3</span> <strong>Introduction aux frames</strong></h2>
<ul>
<li>Depuis la version 16 (2019)</li>
<li>Les frames permettent de travailler en parallèle sur plusieurs bases, sans switcher avec des opérations successives d’enregistrement/ouverture (<code>save</code>/<code>use</code>).
<ul>
<li>Sur l’interface principale, le contenu d’une frame (base de données) est affiché de manière traditionnelle. On peut faire des opérations sur les autres frames déclarées simultanément.</li>
<li>La première base ouverte lors de l’ouverture d’une session est déclarée comme frame par défaut.</li>
</ul></li>
<li>Les frames peuvent être liées entre elles avec une clé d’identification commune.
<ul>
<li>Importations partielles de variables ou d’observations d’une frame à l’autre.</li>
<li>Permet de générer une variable dans une frame en utilisant des variables d’une ou plusieurs autres frames. Il n’est donc pas nécessaire d’apparier les bases entre elles en amont.</li>
</ul></li>
</ul>
<p>On ne verra ici que quelques manipulations de bases, la liaison de frames sera traitée dans le chapitre 6.</p>
<p><strong><code>frame dir</code></strong> ou <strong><code>frame mist</code></strong></p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">list</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  default  74 x 12; 1978 automobile data
  default  74 x 12; 1978 automobile data</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)
  default  74 x 12; 1978 automobile data</code></pre>
</div>
</div>
<p><strong><code>frame rename</code></strong></p>
<p>On renomme une frame avec <code>ancien nom</code> <code>nouveau nom</code></p>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">reset</span>   <span class="co">// voir plus loin - commande ici seulement nécessaire pour compatibilité avec Quarto</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">rename</span> <span class="kw">default</span> auto</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)
  auto  74 x 12; 1978 automobile data</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Autre façon de procéder (et surement meilleure):</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>frame create auto</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>frame auto: sysuse auto, clear</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><strong><code>frame nom_frame:</code></strong> ou <strong><code>frame nom_frame {}</code></strong></p>
<ul>
<li>On peut exécuter une commande en la préfixant par <strong><code>frame nom_frame:</code></strong></li>
<li>Pour une série de commandes, il suffit d’enchasser cette série dans des crochets</li>
</ul>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>frame auto: <span class="kw">mean</span> price</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mean estimation                             Number of obs = 74
</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------------------------
             |       Mean   Std. err.     [95% conf. interval]
-------------+------------------------------------------------
       price |   6165.257    342.872      5481.914    6848.600
--------------------------------------------------------------</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>frame auto {</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> mpg</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="kw">table</span> rep78 foreign  </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mean estimation                             Number of obs = 74
</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>--------------------------------------------------------------
             |       Mean   Std. err.     [95% conf. interval]
-------------+------------------------------------------------
         mpg |     21.297      0.673        19.957      22.638
--------------------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>------------------------------------------------
                   |          Car origin        
                   |  Domestic   Foreign   Total
-------------------+----------------------------
Repair record 1978 |                            
  1                |         2                 2
  2                |         8                 8
  3                |        27         3      30
  4                |         9         9      18
  5                |         2         9      11
  Total            |        48        21      69
------------------------------------------------</code></pre>
</div>
</div>
<p><strong><code>frame copy</code></strong></p>
<p>Permet de copier à l’idendique une frame <strong><code>frame copy nom_frame nouveau_nom</code></strong>.</p>
<p>Dans l’exemple qui suit on va une frame à partir de la base auto, frame <em>prix</em>, en conservant avec seulement les variables <em>foreign</em> et <em>price</em>.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>frame copy auto prix</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  auto  74 x 12; 1978 automobile data
  prix  74 x 12; 1978 automobile data</code></pre>
</div>
</div>
<p>Comme indiqué précédemment, on est pas obligé de charger une base déclarée en frame pour effectuer des opérations dessus. On peut donc conserver les deux seules variables <em>foreign</em> et <em>price</em> tout en gardant la base <em>auto</em> chargée.</p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>frame prix: <span class="kw">keep</span> foreign price</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  auto  74 x 12; 1978 automobile data
* prix  74 x 2; 1978 automobile data

Note: Frames marked with * contain unsaved data.</code></pre>
</div>
</div>
<p>La frame <em>prix</em> ne comporte donc plus que deux variables.</p>
<p>On va supprimer la variable <em>make</em> de la base/frame <em>auto</em></p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> make</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong><code>frame change</code></strong></p>
<p>Permet de switcher d’une frame à une autre. Ici ce sont les informations de la frame <em>prix</em> qui seront chargée dans l’interface de Stata</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>frame change prix </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price, <span class="bn">over</span>(foreign)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Mean estimation                                Number of obs = 74
</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>-----------------------------------------------------------------
                |       Mean   Std. err.     [95% conf. interval]
----------------+------------------------------------------------
c.price@foreign |
      Domestic  |   6072.423    429.491      5216.449    6928.398
       Foreign  |   6384.682    558.994      5270.608    7498.756
-----------------------------------------------------------------</code></pre>
</div>
</div>
<p>Du côté de la frame <em>auto</em>, base chargée initialement, on note que la suppression de la variable <em>make</em> a bien été enregistrée malgré le change de frame.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>frame auto: <span class="kw">des</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Contains data from C:\Program Files\Stata18/ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            11                  13 Apr 2022 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
rep78           int     %8.0g                 Repair record 1978
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
foreign         byte    %8.0g      origin     Car origin
-------------------------------------------------------------------------------
Sorted by: foreign
     Note: Dataset has changed since last saved.</code></pre>
</div>
</div>
<p><strong><code>frame drop</code></strong> et <strong><code>frame reset</code></strong></p>
<p>Permettent de supprimer une ou la totalité des frames</p>
<p><strong><code>frame drop nom_frame</code></strong>, permet de supprimer une frame, à l’exception de celle chargée dans l’interface.</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>frame change auto</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">drop</span> prix</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>frame <span class="ot">dir</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>* auto  74 x 11; 1978 automobile data

Note: Frames marked with * contain unsaved data.</code></pre>
</div>
</div>
<p>On a chargé dans l’interface la frame <em>auto</em>, puis on a supprimé la frame prix. <strong>Par contre il n’est pas possible de supprimer la frame active dans l’interface</strong>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stata 18
</div>
</div>
<div class="callout-body-container callout-body">
<p>Avec la nouvelle version, il est possible de supprimer plusieurs frames avec <code>frame drop</code>, mais toujours à l’exception de celle qui est active.</p>
</div>
</div>
<p><strong><code>frame reset</code></strong></p>
<p>On peut supprimer toutes les frames, dont celle chargée dans l’interface avec <strong><code>frame reset</code></strong>. Dans ce cas il n’y a plus de base chargée dans la session.</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">reset</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">rename</span> <span class="kw">default</span> auto</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>frame <span class="kw">reset</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Contains data
 Observations:             0                  
    Variables:             0                  
Sorted by: </code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapitre3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title"><strong>Le langage Stata</strong></span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./chapitre5.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title"><strong>Les variables</strong></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Marc Thévenin / Ined-Sms / Juin 2023</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"loop":true,"selector":".lightbox","closeEffect":"zoom","openEffect":"zoom","descPosition":"bottom"});</script>



</body></html>