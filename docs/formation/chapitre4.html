<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.179">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Les bases de données</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../formation/chapitre5.html" rel="next">
<link href="../formation/chapitre3.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://mthevenin.github.io/stata_fr/" rel="" target="">
 <span class="menu-text">Stata Ined</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mthevenin.github.io/stata_graphiques/" rel="" target="">
 <span class="menu-text">Graphiques</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://mthevenin.github.io/stata_programmation/" rel="" target="">
 <span class="menu-text">Programmation</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mthevenin" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:marc.thevenin@ined.fr" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">A propos</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Les bases de données</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Formation introductive</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre0.html" class="sidebar-item-text sidebar-link">Présentation</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre1.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre2.html" class="sidebar-item-text sidebar-link">Environnement</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre3.html" class="sidebar-item-text sidebar-link">Le langage Stata</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre4.html" class="sidebar-item-text sidebar-link active">Les bases de données</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../formation/chapitre5.html" class="sidebar-item-text sidebar-link">Les variables</a>
  </div>
</li>
          <li class="sidebar-item">
  formation/chapitre6.qmd
  </li>
          <li class="sidebar-item">
  formation/chapitre7.qmd
  </li>
          <li class="sidebar-item">
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Fichier profile</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../profile/profile1.html" class="sidebar-item-text sidebar-link">Principe</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../profile/profile2.html" class="sidebar-item-text sidebar-link">Exemple profile.do</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Need for speed</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../speedup/intro.html" class="sidebar-item-text sidebar-link">Introduction</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../speedup/gtools.html" class="sidebar-item-text sidebar-link">Gtools</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">Super Macro World</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../macro/intro.html" class="sidebar-item-text sidebar-link">Présentation</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">C’est dans l’R</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../R.html" class="sidebar-item-text sidebar-link">Stata et R</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">Edition des outputs</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tableaux/intro.html" class="sidebar-item-text sidebar-link">Intro - Collect</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul>
  <li><a href="#affectation-du-répertoire-de-travail" id="toc-affectation-du-répertoire-de-travail" class="nav-link active" data-scroll-target="#affectation-du-répertoire-de-travail"><span class="toc-section-number">1</span>  <strong>Affectation du répertoire de travail</strong></a></li>
  <li><a href="#ouverture-et-sauvegarde-dune-base" id="toc-ouverture-et-sauvegarde-dune-base" class="nav-link" data-scroll-target="#ouverture-et-sauvegarde-dune-base"><span class="toc-section-number">2</span>  <strong>Ouverture et sauvegarde d’une base</strong></a>
  <ul class="collapse">
  <li><a href="#ouverture" id="toc-ouverture" class="nav-link" data-scroll-target="#ouverture"><span class="toc-section-number">2.1</span>  Ouverture</a></li>
  <li><a href="#sauvegarde" id="toc-sauvegarde" class="nav-link" data-scroll-target="#sauvegarde"><span class="toc-section-number">2.2</span>  Sauvegarde</a></li>
  <li><a href="#autres-formats" id="toc-autres-formats" class="nav-link" data-scroll-target="#autres-formats"><span class="toc-section-number">2.3</span>  Autres formats</a></li>
  <li><a href="#importationexportation" id="toc-importationexportation" class="nav-link" data-scroll-target="#importationexportation"><span class="toc-section-number">2.4</span>  Importation/Exportation</a></li>
  <li><a href="#création-dune-base-de-donnée-ajout-dobservations" id="toc-création-dune-base-de-donnée-ajout-dobservations" class="nav-link" data-scroll-target="#création-dune-base-de-donnée-ajout-dobservations"><span class="toc-section-number">2.5</span>  Création d’une base de donnée, ajout d’observations</a></li>
  </ul></li>
  <li><a href="#décrire-le-contenu-dune-base" id="toc-décrire-le-contenu-dune-base" class="nav-link" data-scroll-target="#décrire-le-contenu-dune-base"><span class="toc-section-number">3</span>  <strong>Décrire le contenu d’une base</strong></a>
  <ul class="collapse">
  <li><a href="#commande-describe" id="toc-commande-describe" class="nav-link" data-scroll-target="#commande-describe"><span class="toc-section-number">3.1</span>  Commande <code>describe</code></a></li>
  <li><a href="#autres-commandes" id="toc-autres-commandes" class="nav-link" data-scroll-target="#autres-commandes"><span class="toc-section-number">3.2</span>  Autres commandes</a></li>
  </ul></li>
  <li><a href="#tri-doublon-position-des-variables" id="toc-tri-doublon-position-des-variables" class="nav-link" data-scroll-target="#tri-doublon-position-des-variables"><span class="toc-section-number">4</span>  <strong>Tri, doublon, position des variables</strong></a>
  <ul class="collapse">
  <li><a href="#tri-dune-base" id="toc-tri-dune-base" class="nav-link" data-scroll-target="#tri-dune-base"><span class="toc-section-number">4.1</span>  Tri d’une base</a></li>
  <li><a href="#repérage-et-suppression-des-doublons" id="toc-repérage-et-suppression-des-doublons" class="nav-link" data-scroll-target="#repérage-et-suppression-des-doublons"><span class="toc-section-number">4.2</span>  Repérage et suppression des doublons</a></li>
  <li><a href="#modifier-la-place-des-variables-dans-la-base" id="toc-modifier-la-place-des-variables-dans-la-base" class="nav-link" data-scroll-target="#modifier-la-place-des-variables-dans-la-base"><span class="toc-section-number">4.3</span>  Modifier la place des variables dans la base</a></li>
  </ul></li>
  <li><a href="#description-statistique-des-variables" id="toc-description-statistique-des-variables" class="nav-link" data-scroll-target="#description-statistique-des-variables"><span class="toc-section-number">5</span>  <strong>Description statistique des variables</strong></a>
  <ul class="collapse">
  <li><a href="#variables-quantitatives" id="toc-variables-quantitatives" class="nav-link" data-scroll-target="#variables-quantitatives"><span class="toc-section-number">5.1</span>  Variables quantitatives</a>
  <ul class="collapse">
  <li><a href="#tableaux-dindicateurs" id="toc-tableaux-dindicateurs" class="nav-link" data-scroll-target="#tableaux-dindicateurs"><span class="toc-section-number">5.1.1</span>  Tableaux d’indicateurs</a></li>
  <li><a href="#graphiques" id="toc-graphiques" class="nav-link" data-scroll-target="#graphiques"><span class="toc-section-number">5.1.2</span>  Graphiques</a></li>
  </ul></li>
  <li><a href="#variables-catégorielles" id="toc-variables-catégorielles" class="nav-link" data-scroll-target="#variables-catégorielles"><span class="toc-section-number">5.2</span>  Variables catégorielles</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Les bases de données</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<table class="table">
<colgroup>
<col style="width: 34%">
<col style="width: 65%">
</colgroup>
<thead>
<tr class="header">
<th>SECTION</th>
<th>COMMANDES ET EXPRESSIONS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Affectation d’un répertoire de travail</strong></td>
<td><code>cd</code></td>
</tr>
<tr class="even">
<td><strong>Ouverture et sauvegarde d’une base</strong></td>
<td><code>use</code> <code>webuse [set]</code> <code>sysuse</code> <code>save</code> <code>saveold</code> <code>import</code> <code>export</code> <strong><code>usesas</code></strong> <strong><code>savasas</code></strong> <code>set obs</code> <code>insobs</code></td>
</tr>
<tr class="odd">
<td><strong>Décrire le contenu d’une base</strong></td>
<td><code>describe</code> <code>list</code> <code>codebook</code> <code>labelbook</code> <code>label list</code></td>
</tr>
<tr class="even">
<td><strong>Tri, doublon, position des variables</strong></td>
<td><code>sort</code> <code>gsort</code> <code>duplicates</code> <code>order</code></td>
</tr>
<tr class="odd">
<td><strong>Decription statistique des variables</strong></td>
<td><code>summarize</code> <code>mean</code> <code>tabstat</code> <code>tabulate</code> <code>fre</code> <code>tabm</code></td>
</tr>
</tbody>
</table>
<ul>
<li><strong>En gras, commandes externes</strong></li>
<li><em>En italique, commandes associées à un chapitre ultérieur</em></li>
</ul>
<section id="affectation-du-répertoire-de-travail" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> <strong>Affectation du répertoire de travail</strong></h1>
<p>La commande <code>cd</code> (Current Directory), permet d’indiquer le chemin d’accès du répertoire où se trouve la base à ouvrir ou à enregistrer. Si aucun chemin d’accès n’est spécifié, Stata ira chercher la base dans le répertoire par défaut (normalement C: ou D:).</p>
<p>Syntaxe</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>cd <span class="st">"path"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><strong>Remarque</strong><br>
Avec cette commande, un seul repertoire de travail est actif. On peut élargir les possibilités en affectant des répertoires avec des macros variables locales ou globales</p>
</section>
<section id="ouverture-et-sauvegarde-dune-base" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> <strong>Ouverture et sauvegarde d’une base</strong></h1>
<section id="ouverture" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="ouverture"><span class="header-section-number">2.1</span> Ouverture</h2>
<p><strong>Commande</strong> <code>use</code><br>
<br> Sans chargement d’un répertoire</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>use <span class="st">"path/nom_base.dta"</span> [,clear]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>L’option <code>clear</code> permet d’effacer une base en cours d’utilisation. Il est conseillé de mettre cette option systématiquement. On peut également utiliser <code>clear</code> comme instruction avant d’ouvrir une base. on ne supprime pas la base du répertoire (commande <code>erase</code>), elle est juste écrasée dans la session.</p>
<p>Syntaxe avec affectation d’un répertoire:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cd <span class="st">"path"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>use <span class="st">"nom_base.dta"</span>, clear </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>ou</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cd <span class="st">"path"</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>clear</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>use <span class="st">"nom_base.dta"</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Remarque: pour les bases d’exemples préinstallées, on utilise la commande <code>sysuse</code>. Dans les fichiers d’aide, des exemples font également appels a des bases localisées sur des serveurs qui s’ouvrent avec la commande <code>webuse</code>.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sysuse auto, clear</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Ouverture d’une base stockée sur un git [github, gitlab …]</strong></p>
<p>Dans un premier temps, comme pour <code>cd</code> il faut charger le répertoire où se trouve localisé la base, avec la commande <strong><code>webuse set</code></strong>. Par exemple sur mon dépôt git, une base d’exemple (<em>logement.dta</em>) pour une commande se trouve à cette adresse: <a href="https://github.com/mthevenin/stata_graphiques/tree/main/programmation/gjoint" class="uri">https://github.com/mthevenin/stata_graphiques/tree/main/programmation/gjoint</a></p>
<p>Pour charger ce répertoire à distance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>webuse set  <span class="st">"https://raw.githubusercontent.com//mthevenin/stata_graphiques/master/ressources/gjoint"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On remarque que le chemin n’est pas identique au simple lien (spécificité des dépôt de type git).</p>
<p>Il suffit ensuite de charger la base avec <code>webuse</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>webuse logement.dta, clear</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On revient au dépôt officiel de stata avec <code>webuse set</code></p>
<p>En résumé avec un seul bloc d’instructions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span>  <span class="st">"https://raw.githubusercontent.com//mthevenin/stata_graphiques/master/ressources/gjoint"</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="st">"logement.dta"</span>, <span class="kw">clear</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> <span class="kw">set</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>&gt; ster/ressources/gjoint"
(prefix now "https://raw.githubusercontent.com//mthevenin/stata_graphiques/mast
&gt; er/ressources/gjoint")


(prefix now "https://www.stata-press.com/data/r17")</code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="sauvegarde" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sauvegarde"><span class="header-section-number">2.2</span> Sauvegarde</h2>
<p><strong>Commandes</strong> <code>save</code> ou <code>saveold</code></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> <span class="st">"path/nom_base.dta"</span> [, <span class="kw">replace</span>]     </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>L’option <code>replace</code> permet d’écraser une version antérieure de la base. Obligatoire à partir de la 2ème sauvegarde, mais on peut l’utiliser dès la première sauvegarde (un message d’avertissement s’affiche).</p>
<div class="cell" data-collectcode="true">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span>  </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> auto, <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)

file auto.dta saved</code></pre>
</div>
</div>
<p><code>saveold</code> permettra d’ouvrir une bases avec une version ancienne de Stata non compatibles avec la version courante. Cela commence à devenir moins critique, mais avec <code>save</code> il ne sera plus possible d’ouvrir une base avec une version inférieure à la 13 ou inférieur à la 13 (passage à l’encodage Utf8 avec la version 14).</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a> <span class="kw">saveold</span> <span class="st">"path/nom_base.dta"</span>, [<span class="kw">replace</span>] [<span class="kw">version</span>(#)] <span class="co">// # = numéro de la version de Stata: </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Remarque:</p>
<ul>
<li>Ecrire l’extension .dta n’est pas obligatoire</li>
<li>Les doubles quotes ne sont obligatoires que s’il y a un espace dans le chemin d’accès et/ou dans le nom de la base</li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="st">"ma base"</span>, <span class="kw">clear</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> ma_base,   <span class="kw">clear</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="autres-formats" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="autres-formats"><span class="header-section-number">2.3</span> Autres formats</h2>
</section>
<section id="importationexportation" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="importationexportation"><span class="header-section-number">2.4</span> Importation/Exportation</h2>
<p><strong>Excel et fichiers textes (.txt, .csv)</strong><br>
<br></p>
<ul>
<li>Le plus simple est passer par le menu: files + [<em>Import</em> ou <em>Export</em>] qui dispose d’une fenêtre de prévisualisation.
<ul>
<li>Pour excel les commandes sont <code>import excel</code> et <code>export excel</code></li>
<li>Pour des fichiers textes type csv (R), les commandes sont <code>import delimited</code> et <code>export delimited</code></li>
</ul></li>
</ul>
<p>**Exemples</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>* exportation csv</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> delimited <span class="kw">using</span> <span class="st">"D:\D\stata_temp</span><span class="ch">\e</span><span class="st">xport_csv.csv"</span>, <span class="kw">replace</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>* exportation xls</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">export</span> excel <span class="kw">using</span> <span class="st">"D:\D\stata_temp</span><span class="ch">\e</span><span class="st">xport_excel.xls"</span>, firstrow(variables) <span class="kw">replace</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>* importation cxv</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>import delimited <span class="st">"D:\D\stata_temp</span><span class="ch">\e</span><span class="st">xport_csv.csv"</span>,  <span class="kw">clear</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>* importation xls</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>import excel <span class="st">"D:\D\stata_temp</span><span class="ch">\e</span><span class="st">xport_excel.xls"</span>, sheet(<span class="st">"Sheet1"</span>) firstrow <span class="kw">clear</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>SAS</strong><br>
<br></p>
<ul>
<li>Depuis la version 16 de Stata il est possible d’importer directement des formats <code>sas7bdat</code>. Pas d’exportation possible.</li>
<li>Pour les versions antérieure, la solution installée via <em>sasxport</em> n’est pas satisfaisante. Il est alors conseillé d’utiliser le package externe <code>savasas</code>
<ul>
<li>Sas =&gt; Stata [importation]: commande <code>usesas</code><br>
</li>
<li>Stata =&gt; Sas [exportation] : commande <code>savasas</code></li>
<li>Si le chemin d’accès à l’exécutable de SAS Windows n’est pas reconnu, il faut récupérer et éditer le fichier sasexe.do (à partir de la ligne 169), dont l’accès est donné dans le fichier d’aide.<br>
</li>
<li>Pour l’exportation, on peut générer un catalogue de format,en dur, avec l’option <code>format</code>.</li>
</ul></li>
</ul>
<p><strong>SPSS</strong><br>
<br></p>
<ul>
<li>Depuis la dernière version de Stata (16), il est possible d’importer directement des bases de ce format.</li>
<li>Pas de possibilité d’exportation directe.</li>
</ul>
</section>
<section id="création-dune-base-de-donnée-ajout-dobservations" class="level2 callout-info" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="création-dune-base-de-donnée-ajout-dobservations"><span class="header-section-number">2.5</span> Création d’une base de donnée, ajout d’observations</h2>
<p>On peut créer une base de donnée, “vide”, avec la commande <strong><code>set obs nbre_observations</code></strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>clear </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>set obs <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A une base existante, on peut ajouter des observations (en valeurs manquante) avec la commande <code>insobs nbre_observation</code>. Par défaut ces observations s’ajouteront après la dernière ligne (option <code>before/after(position)</code> pour renseigner la position de la première observation ajoutée.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>insobs <span class="dv">10</span>  <span class="sc">/</span><span class="er">/</span> ajout de <span class="dv">10</span> observations à la base</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="décrire-le-contenu-dune-base" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> <strong>Décrire le contenu d’une base</strong></h1>
<section id="commande-describe" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="commande-describe"><span class="header-section-number">3.1</span> Commande <code>describe</code></h2>
<p>Permet, sous forme de tableau, d’avoir des renseignement sur une base de donnée: taille en mémoire, nombre d’observations, descriptif des variables (nom, format, labels). La commande est régulièrement tronquée jusqu’à <code>des</code></p>
<p><strong>Base courante (ouverte)</strong></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">describe</span> [<span class="kw">varlist</span> , <span class="kw">short</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell" data-collectcode="true">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto.dta, <span class="kw">clear</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>(1978 automobile data)


Contains data from C:\PROGRA~1\Stata17\ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            12                  13 Apr 2020 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
make            str18   %-18s                 Make and model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
rep78           int     %8.0g                 Repair record 1978
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
foreign         byte    %8.0g      origin     Car origin
-------------------------------------------------------------------------------
Sorted by: foreign</code></pre>
</div>
</div>
<p><strong>Base stockée (non ouverte)</strong></p>
<p>On peut également décrire le contenu d’une base en format .dta en mémoire et non ouverte avec l’argument <code>using "path/nombase"</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">describe</span> <span class="kw">using</span>  <span class="st">"https://www.stata-press.com/data/r17/census2.dta"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>Contains data                                 1980 Census data by state
 Observations:            50                  2 Dec 2020 09:21
    Variables:            15                  
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
state           str13   %-13s                 State
state2          str2    %-2s                  Two-letter state abbreviation
region          byte    %-8.0g     cenreg     Census region
pop             long    %12.0gc               Population
poplt5          long    %12.0gc               Pop, &lt; 5 year
pop5_17         long    %12.0gc               Pop, 5 to 17 years
pop18p          long    %12.0gc               Pop, 18 and older
pop65p          long    %12.0gc               Pop, 65 and older
popurban        long    %12.0gc               Urban population
medage          float   %9.2f                 Median age
death           long    %12.0gc               Number of deaths
marriage        long    %12.0gc               Number of marriages
divorce         long    %12.0gc               Number of divorces
drate           int     %9.0g                 Deathrate
age             byte    %9.0g                 Age
-------------------------------------------------------------------------------
Sorted by: </code></pre>
</div>
</div>
</section>
<section id="autres-commandes" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="autres-commandes"><span class="header-section-number">3.2</span> Autres commandes</h2>
<ul>
<li><strong>Affichage de la base dans l’output</strong></li>
</ul>
<p>Commande <code>list</code></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a> <span class="ot">list</span> [<span class="kw">varlist</span>] [expression]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> price mpg turn foreign <span class="kw">in</span> 1/10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>     |  price   mpg   turn    foreign |
     |--------------------------------|
  1. |  4,099    22     40   Domestic |
  2. |  4,749    17     40   Domestic |
  3. |  3,799    22     35   Domestic |
  4. |  4,816    20     40   Domestic |
  5. |  7,827    15     43   Domestic |
     |--------------------------------|
  6. |  5,788    18     43   Domestic |
  7. |  4,453    26     34   Domestic |
  8. |  5,189    20     42   Domestic |
  9. | 10,372    16     43   Domestic |
 10. |  4,082    19     42   Domestic |
     +--------------------------------+</code></pre>
</div>
</div>
<p>Sauf exceptions, comme la petite base d’exemple utilisée ici, penser à bien filtrer les informations souhaitées en termes de variables et d’observations.</p>
<ul>
<li><strong>Information sur les labels affectés aux variables</strong></li>
</ul>
<p>Commande <code>labelbook</code> et <code>label list</code></p>
<p><code>labelbook</code>: affiche les informations sur les labels affectés aux modalités des variables.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">labelbook</span> [nom_label]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">labelbook</span> origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>Value label origin 
-------------------------------------------------------------------------------

      Values                                    Labels
       Range:  [0,1]                     String length:  [7,8]
           N:  2                 Unique at full length:  yes
        Gaps:  no                  Unique at length 12:  yes
  Missing .*:  0                           Null string:  no
                               Leading/trailing blanks:  no
                                    Numeric -&gt; numeric:  no
  Definition
           0   Domestic
           1   Foreign

   Variables:  foreign</code></pre>
</div>
</div>
<p><code>label list [nom_label]</code> donne seulement l’affectation des labels aux valeurs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="ot">list</span> origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>origin:
           0 Domestic
           1 Foreign</code></pre>
</div>
</div>
</section>
</section>
<section id="tri-doublon-position-des-variables" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> <strong>Tri, doublon, position des variables</strong></h1>
<section id="tri-dune-base" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="tri-dune-base"><span class="header-section-number">4.1</span> Tri d’une base</h2>
<p>Commande <code>sort</code><br>
<br></p>
<pre><code>sort varlist</code></pre>
<ul>
<li>La commande <code>sort</code> n’effectue que des tris croissants. Pour faire un tri décroissant, on peut utiliser la commande <code>gsort</code>. Tris croissants et décroissant peuvent se succéder dans une logique de cluster.
<ul>
<li><code>sort varlist</code> =&gt; tri croissant</li>
<li><code>gsort + var1</code> =&gt; croissant <em>var1</em></li>
<li><code>gsort - var1</code> =&gt; décroissant <em>var1</em></li>
<li><code>gsort + var1 - var2</code> =&gt; croissant <em>var1</em> et décroissant <em>var2</em> dans chaque strate de <em>var1</em></li>
</ul></li>
<li>Le tri d’une peut/doit être réalisé lorsqu’on veut répéter une instruction avec le préfixe <code>bysort</code>: <code>bysort varlist: instruction</code>. Il est imposé lorsqu’on souhaite apparier des bases [voir chapitre 6]</li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>* tri croissant sur la <span class="kw">variable</span> price</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> price</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>* tri décroissant sur la <span class="kw">variable</span> prix pour chaque niveau <span class="kw">de</span> la <span class="kw">variable</span> foreign</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gsort</span> + foreign - price  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="repérage-et-suppression-des-doublons" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="repérage-et-suppression-des-doublons"><span class="header-section-number">4.2</span> Repérage et suppression des doublons</h2>
<p><strong>Repérage et suppression des doublons</strong></p>
<p>Commande <code>duplicates list/tag/drop [varlist]</code></p>
<p>Permet de lister, repérer (avec <code>gen(varname)</code> ) ou supprimer des observations répliquées. Si la liste de variables n’est pas renseignée, elles toutes sont utilisées.</p>
<p>Syntaxe</p>
<pre><code>duplicates list [varlist]

duplicates tag [varlist], gen(var)

duplicates drop [varlist]</code></pre>
</section>
<section id="modifier-la-place-des-variables-dans-la-base" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="modifier-la-place-des-variables-dans-la-base"><span class="header-section-number">4.3</span> Modifier la place des variables dans la base</h2>
<p>Commande <code>order</code></p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">varlist</span>, [first/<span class="fu">last</span>] [after/before(varname)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> foreign, first</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> rep78, after(foreign)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="kw">des</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>Contains data from C:\PROGRA~1\Stata17\ado\base/a/auto.dta
 Observations:            74                  1978 automobile data
    Variables:            12                  13 Apr 2020 17:45
                                              (_dta has notes)
-------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
-------------------------------------------------------------------------------
foreign         byte    %8.0g      origin     Car origin
rep78           int     %8.0g                 Repair record 1978
make            str18   %-18s                 Make and model
price           int     %8.0gc                Price
mpg             int     %8.0g                 Mileage (mpg)
headroom        float   %6.1f                 Headroom (in.)
trunk           int     %8.0g                 Trunk space (cu. ft.)
weight          int     %8.0gc                Weight (lbs.)
length          int     %8.0g                 Length (in.)
turn            int     %8.0g                 Turn circle (ft.)
displacement    int     %8.0g                 Displacement (cu. in.)
gear_ratio      float   %6.2f                 Gear ratio
-------------------------------------------------------------------------------
Sorted by: foreign</code></pre>
</div>
</div>
<p>Cette opération est particulièrement pour organiser sa base de données après la création de nouvelles variables.</p>
</section>
</section>
<section id="description-statistique-des-variables" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> <strong>Description statistique des variables</strong></h1>
<p>Dans les menus de l’interface principale: <strong>Statistics</strong> =&gt; <strong>Summaries, tables &amp; tests</strong></p>
<section id="variables-quantitatives" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="variables-quantitatives"><span class="header-section-number">5.1</span> Variables quantitatives</h2>
<section id="tableaux-dindicateurs" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="tableaux-dindicateurs"><span class="header-section-number">5.1.1</span> Tableaux d’indicateurs</h3>
<div class="callout callout-style-default callout-note callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Les commandes qui sont rapidement décrites afficheront des indicateurs communs, typiquement la moyenne. Elles se distinguent par la forme de leur output facilitant plus ou moins les comparaisons, les possibilités offertes en termes de pondération, et sur la récupération des résultats (macro).</p>
</div>
</div>
<p><strong>Commande <code>summarize</code></strong></p>
<p>Comme son l’indique, la commande <code>summarize</code>, avec l’option <code>detail</code> (<code>d</code>) donne un résumé complet de la distribution d’une variable quantitative: moyenne, variance, quantiles, symétrie, applatissement ..nom l’indique l.)</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Syntaxe</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">summarize</span> <span class="kw">varlist</span> [, <span class="kw">detail</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Si on indique pas le nom d’au moins une variable, toutes les variables de la base seront sélectionnées.</p>
<p>La commande peut-être tronquée jusqu’à <code>sum</code> [<strong>Warning</strong>: il existe également une fonction <code>sum</code> pour générer des cumuls lors d’une création de variable - voir chapitre 5].</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> price</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
       price |         74    6165.257    2949.496       3291      15906

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
        make |          0
       price |         74    6165.257    2949.496       3291      15906
         mpg |         74     21.2973    5.785503         12         41
       rep78 |         69    3.405797    .9899323          1          5
    headroom |         74    2.993243    .8459948        1.5          5
-------------+---------------------------------------------------------
       trunk |         74    13.75676    4.277404          5         23
      weight |         74    3019.459    777.1936       1760       4840
      length |         74    187.9324    22.26634        142        233
        turn |         74    39.64865    4.399354         31         51
displacement |         74    197.2973    91.83722         79        425
-------------+---------------------------------------------------------
  gear_ratio |         74    3.014865    .4562871       2.19       3.89
     foreign |         74    .2972973    .4601885          0          1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> price <span class="fu">length</span>, <span class="kw">d</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3291           3291
 5%         3748           3299
10%         3895           3667       Obs                  74
25%         4195           3748       Sum of wgt.          74

50%       5006.5                      Mean           6165.257
                        Largest       Std. dev.      2949.496
75%         6342          13466
90%        11385          13594       Variance        8699526
95%        13466          14500       Skewness       1.653434
99%        15906          15906       Kurtosis       4.819188

                        Length (in.)
-------------------------------------------------------------
      Percentiles      Smallest
 1%          142            142
 5%          154            147
10%          157            149       Obs                  74
25%          170            154       Sum of wgt.          74

50%        192.5                      Mean           187.9324
                        Largest       Std. dev.      22.26634
75%          204            221
90%          218            222       Variance       495.7899
95%          221            230       Skewness      -.0409746
99%          233            233       Kurtosis        2.04156</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> foreign: <span class="kw">sum</span> price, <span class="kw">d</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>-&gt; foreign = Domestic

                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3291           3291
 5%         3667           3299
10%         3955           3667       Obs                  52
25%         4184           3799       Sum of wgt.          52

50%       4782.5                      Mean           6072.423
                        Largest       Std. dev.      3097.104
75%         6234          13466
90%        11385          13594       Variance        9592055
95%        13594          14500       Skewness       1.777939
99%        15906          15906       Kurtosis       5.090316

-------------------------------------------------------------------------------
-&gt; foreign = Foreign

                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3748           3748
 5%         3798           3798
10%         3895           3895       Obs                  22
25%         4499           3995       Sum of wgt.          22

50%         5759                      Mean           6384.682
                        Largest       Std. dev.      2621.915
75%         7140           9690
90%         9735           9735       Variance        6874439
95%        11995          11995       Skewness       1.215236
99%        12990          12990       Kurtosis       3.555178</code></pre>
</div>
</div>
<ul>
<li><strong><em>Avantage</em></strong>: récupération des résultats sous forme de macro rapide.</li>
<li><strong><em>Inconvénients</em></strong>: pas de sélection des indicateurs avec l’option <code>detail</code>, output pas adapté aux comparaisons.</li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>return list: macros associées aux indicateurs</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>*Extrait <span class="kw">de</span> l'aide <span class="kw">de</span> <span class="kw">summarize</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* help summarize</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="co">    summarize stores the following in r():</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co">    Scalars   </span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="co">      r(N)           number of observations</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="co">      r(mean)        mean</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co">      r(skewness)    skewness (detail only)</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="co">      r(min)         minimum</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="co">      r(max)         maximum</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a><span class="co">      r(sum_w)       sum of the weights</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p1)          1st percentile (detail only)</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p5)          5th percentile (detail only)</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p10)         10th percentile (detail only)</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p25)         25th percentile (detail only)</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p50)         50th percentile (detail only)</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p75)         75th percentile (detail only)</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p90)         90th percentile (detail only)</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p95)         95th percentile (detail only)</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="co">      r(p99)         99th percentile (detail only)</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a><span class="co">      r(Var)         variance</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="co">      r(kurtosis)    kurtosis (detail only)</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a><span class="co">      r(sum)         sum of variable</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a><span class="co">      r(sd)          standard deviation</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">qui</span> <span class="kw">sum</span> price, <span class="kw">d</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">return</span> <span class="ot">list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>scalars:
                  r(N) =  74
              r(sum_w) =  74
               r(mean) =  6165.256756756757
                r(Var) =  8699525.97426879
                 r(sd) =  2949.495884768919
           r(skewness) =  1.653433511704859
           r(kurtosis) =  4.819187528464004
                r(sum) =  456229
                r(min) =  3291
                r(max) =  15906
                 r(p1) =  3291
                 r(p5) =  3748
                r(p10) =  3895
                r(p25) =  4195
                r(p50) =  5006.5
                r(p75) =  6342
                r(p90) =  11385
                r(p95) =  13466
                r(p99) =  15906</code></pre>
</div>
</div>
<p><strong><code>mean</code></strong></p>
<p>N’affiche que la moyenne et ses statistiques associées. L’option <code>over</code> permet de comparer les valeurs moyennes des modalités d’une variable catégorielle (<code>over(varname)</code>) ou un croisement des modalités de plusieurs variables (<code>over(varlist)</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price  </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price, <span class="bn">over</span>(foreign)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="kw">mean</span> price, <span class="bn">over</span>(foreign rep78)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>Mean estimation                             Number of obs = 74

--------------------------------------------------------------
             |       Mean   Std. err.     [95% conf. interval]
-------------+------------------------------------------------
       price |   6165.257    342.872      5481.914    6848.600
--------------------------------------------------------------


Mean estimation                                Number of obs = 74

-----------------------------------------------------------------
                |       Mean   Std. err.     [95% conf. interval]
----------------+------------------------------------------------
c.price@foreign |
      Domestic  |   6072.423    429.491      5216.449    6928.398
       Foreign  |   6384.682    558.994      5270.608    7498.756
-----------------------------------------------------------------


Mean estimation                                      Number of obs = 69

-----------------------------------------------------------------------
                      |       Mean   Std. err.     [95% conf. interval]
----------------------+------------------------------------------------
c.price@foreign#rep78 |
          Domestic#1  |   4564.500    369.500      3827.174    5301.826
          Domestic#2  |   5967.625   1265.494      3442.372    8492.878
          Domestic#3  |   6607.074    704.611      5201.044    8013.104
          Domestic#4  |   5881.556    530.673      4822.614    6940.497
          Domestic#5  |   4204.500    220.500      3764.499    4644.501
           Foreign#1  |      0.000  (no observations)
           Foreign#2  |      0.000  (no observations)
           Foreign#3  |   4828.667    742.249      3347.532    6309.801
           Foreign#4  |   6261.444    632.031      5000.247    7522.642
           Foreign#5  |   6292.667    921.876      4453.091    8132.242
-----------------------------------------------------------------------</code></pre>
</div>
</div>
<ul>
<li><strong>Avantage</strong>: output synthétique si la moyenne de plusieurs groupes comparées</li>
<li><strong>Inconvénients</strong>: récupération des résultats via une matrice (on oublie)</li>
</ul>
<p><strong><code>tabstat</code></strong></p>
<p>Permet de sélectionner les indicateurs avec l’option <code>stat()</code> (par défaut la moyenne). L’option <code>by()</code> permet de comparer le ou les indicateurs pour chaque niveau d’une variable catégorielle. Dans ce cas <code>tabstat</code> affiche également les résultats sur l’ensemble des observations (sinon ajouter l’option <code>nototal</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> price  </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> price mpg, <span class="kw">by</span>(foreign)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>    Variable |      Mean
-------------+----------
       price |  6165.257
------------------------


Summary statistics: Mean
Group variable: foreign (Car origin)

 foreign |     price       mpg
---------+--------------------
Domestic |  6072.423  19.82692
 Foreign |  6384.682  24.77273
---------+--------------------
   Total |  6165.257   21.2973
------------------------------</code></pre>
</div>
</div>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>liste des indicateurs</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>*Extrait <span class="kw">de</span> l'aide <span class="kw">de</span> <span class="kw">summarize</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* help tabstat</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">        mean            mean</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">        count           count of nonmissing observations</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">        n               same as count</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">        sum             sum</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co">        max             maximum</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="co">        min             minimum</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co">        range           range = max - min</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="co">        sd              standard deviation</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co">        variance        variance</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co">        cv              coefficient of variation (sd/mean)</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co">        semean          standard error of mean (sd/sqrt(n))</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="co">        skewness        skewness</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="co">        kurtosis        kurtosis</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="co">        p1              1st percentile</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="co">        p5              5th percentile</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="co">        p10             10th percentile</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="co">        p25             25th percentile</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="co">        median          median (same as p50)</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="co">        p50             50th percentile (same as median)</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a><span class="co">        p75             75th percentile</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a><span class="co">        p90             90th percentile</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a><span class="co">        p95             95th percentile</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a><span class="co">        p99             99th percentile</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a><span class="co">        iqr             interquartile range = p75 - p25</span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a><span class="co">        q               equivalent to specifying p25 p50 p75</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Si on souhaite ajouter la médiane</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabstat</span> price mpg, <span class="kw">by</span>(foreign) stat(<span class="kw">mean</span> <span class="kw">median</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="result"><code>Summary statistics: Mean, p50
Group variable: foreign (Car origin)

 foreign |     price       mpg
---------+--------------------
Domestic |  6072.423  19.82692
         |    4782.5        19
---------+--------------------
 Foreign |  6384.682  24.77273
         |      5759      24.5
---------+--------------------
   Total |  6165.257   21.2973
         |    5006.5        20
------------------------------</code></pre>
</div>
</div>
</section>
<section id="graphiques" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="graphiques"><span class="header-section-number">5.1.2</span> Graphiques</h3>
<p><strong>[MAJ EN COURS: bcp de nouveautés]</strong></p>
<p>Juste une rapide présentation de quelques visualisations permettant d’explorer des distributions.</p>
<p>Une seule distribution: <strong>graph box/hbox</strong> , <strong>histogram</strong>, <strong><code>violinplot</code></strong> (externe)<br>
Plusieurs distributions: <strong><code>violinplot</code></strong> (externe) Deux distribution croisée: <strong><code>hexplot</code></strong> (externe), <strong><code>gjoint</code></strong> (externe)</p>
<p><strong>Boxplot</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">graph</span> hbox mpg, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">graph</span> hbox mpg, <span class="bn">over</span>(foreign)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g1.png" class="lightbox" title="Sans comparaison" data-gallery="quarto-lightbox-gallery-1"><img src="img4/g1.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Sans comparaison</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g2.png" class="lightbox" title="Avec comparaison" data-gallery="quarto-lightbox-gallery-2"><img src="img4/g2.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Avec comparaison</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Histogramme</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> mpg, <span class="kw">percent</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> mpg, <span class="kw">percent</span> <span class="kw">by</span>(foreign)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g3.png" class="lightbox" title="Sans comparaison" data-gallery="quarto-lightbox-gallery-3"><img src="img4/g3.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Sans comparaison</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g4.png" class="lightbox" title="Avec comparaison" data-gallery="quarto-lightbox-gallery-4"><img src="img4/g4.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Avec comparaison</figcaption><p></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Dans le langage de Stata, ce type de graphique est appelé <em>oneway</em>.</li>
<li>L’altération de son aspect avec les options n’est pas très flexible, surtout au niveau des couleurs.</li>
<li>Pour les histogrammes, il y a une version <em>twoway</em> qui permet d’empilé plusieurs histogrammes dans un même graphique, mais généralement la visualisation n’est pas optimale. Préférer en ce cas là une approche par les <strong>densités</strong> (voir <code>violinplot</code> - comparaison III).</li>
<li>Conseil de sémiologie graphique: garder l’axe quantitatif/continu sur les abcisses .</li>
</ul>
<p><strong>Violinplot (Ben Jann)</strong></p>
<p>Toujours beaucoup d’options dans les commandes de <em>magik</em> B.Jann. Se reporter à son tutoriel sur github pour l’installation (nécessite l’installation de dépendances) <a href="https://github.com/benjann/violinplot/">Lien</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>violinplot mpg, <span class="fu">fill</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>violinplot mpg, nobox <span class="bn">over</span>(foreign) left overlay nomedian  dscale(.) </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>violinplot mpg, <span class="fu">fill</span> <span class="bn">over</span>(foreign)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>violinplot mpg, <span class="fu">fill</span> <span class="kw">split</span>(foreign) horizontal</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g5.png" class="lightbox" title="Sans comparaison" data-gallery="quarto-lightbox-gallery-5"><img src="img4/g5.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Sans comparaison</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g7.png" class="lightbox" title="Comparaison I" data-gallery="quarto-lightbox-gallery-6"><img src="img4/g7.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Comparaison I</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g6.png" class="lightbox" title="Comparaison II" data-gallery="quarto-lightbox-gallery-7"><img src="img4/g6.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Comparaison II</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g8.png" class="lightbox" title="Comparaison III" data-gallery="quarto-lightbox-gallery-8"><img src="img4/g8.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Comparaison III</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p><strong>Deux variables quantitatives</strong></p>
<ul>
<li>Une nuage de point pêche rapidement lorsque le nombre d’observations augmente, par exemple audelà de 200.</li>
<li>Solutions:
<ul>
<li>Courbes de niveaux</li>
<li><code>Heatplot</code>/<code>hexplot</code>: l’idée est de visualiser un histogramme “vu du dessuss”, la hauteurs des barres étant données par un différentiel de couleur issues d’une palette séquentielle (du clair au foncé par exemple).</li>
</ul></li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Installation heatplot</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">ssc</span> install heatplot, <span class="kw">replace</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<ul>
<li>Il peut-être intéressant d’ajouté les distributions marginales des deux variables. J’ai programmé une petite commande (encore en version très alpha): <strong><code>gjoint</code></strong>. Tout le mérite revient à B.Jann pour la commande <code>hexplot</code> (j’ai juste combiné <code>hexplot</code> avec des histogrammes).</li>
</ul>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Installation gjoint</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>net install gjoint, from(<span class="st">"https://raw.githubusercontent.com/mthevenin/stata_graphiques/master/ressources/gjoint/"</span>) <span class="kw">replace</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>hexplot price mpg, colors(flare)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>gjoint price mpg, <span class="kw">palette</span>(flare)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g9.png" class="lightbox" title="hexplot" data-gallery="quarto-lightbox-gallery-9"><img src="img4/g9.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">hexplot</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure">
<p><a href="img4/g10.png" class="lightbox" title="hexplot" data-gallery="quarto-lightbox-gallery-10"><img src="img4/g10.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">hexplot</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="variables-catégorielles" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="variables-catégorielles"><span class="header-section-number">5.2</span> Variables catégorielles</h2>
<p>La principale commande est <code>tabulate</code> (<code>tab</code>)</p>
<p>Syntaxe (tableau croisé)</p>
<pre><code>tab var1 var2 [, mis nofreq row col chi2 ......]</code></pre>
<pre><code>tab rep78 foreign, mis

    Repair |
    Record |    Origine voiture
      1978 |  Domestic    Foreign |     Total
-----------+----------------------+----------
         1 |         2          0 |         2 
         2 |         8          0 |         8 
         3 |        27          3 |        30 
         4 |         9          9 |        18 
         5 |         2          9 |        11 
         . |         4          1 |         5 
-----------+----------------------+----------
     Total |        52         22 |        74 

tab rep78 foreign,  nofreq col

    Repair |
    Record |    Origine voiture
      1978 |  Domestic    Foreign |     Total
-----------+----------------------+----------
         1 |      4.17       0.00 |      2.90 
         2 |     16.67       0.00 |     11.59 
         3 |     56.25      14.29 |     43.48 
         4 |     18.75      42.86 |     26.09 
         5 |      4.17      42.86 |     15.94 
-----------+----------------------+----------
     Total |    100.00     100.00 |    100.00 
</code></pre>
<ul>
<li>On peut également utiliser la commande <code>table</code> pour afficher des effectifs croisés.</li>
<li>La commande externe <code>tab3way</code> permet d’afficher des tables pour 3 variables catégorielles.</li>
<li>Une option intéressante est <code>nolabel</code>. Si les modalités ont des libellés, le tableau ne les affiche pas (utile pour du recodage - voir chapitre suivant).</li>
</ul>
<pre><code>tab rep78 foreign,  nofreq col nolab

    Repair |
    Record |    Origine voiture
      1978 |         0          1 |     Total
-----------+----------------------+----------
         1 |      4.17       0.00 |      2.90 
         2 |     16.67       0.00 |     11.59 
         3 |     56.25      14.29 |     43.48 
         4 |     18.75      42.86 |     26.09 
         5 |      4.17      42.86 |     15.94 
-----------+----------------------+----------
     Total |    100.00     100.00 |    100.00 
</code></pre>
<p><strong>Graphiques</strong></p>
<p><strong>A Ajouter: pourquoi les camembers sont visualisation de mauvaise qualité (et programmation peu efficace avec Stata)</strong></p>
<p>On privilégiera ici des commandes externes, en particulier celles de <strong>NJ.Cox</strong> <code>catplot</code> et <code>spineplot</code></p>
<pre><code>ssc install catplot 

* tableau: tab rep78 foreign,  nofreq col
catplot rep78, by(foreign) percent(foreign)
* tableau: tab rep78 foreign,  nofreq row
catplot rep78, by(foreign) percent(foreign)
spineplot foreign rep78</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img4/x3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="img4/x3.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
<pre><code>ssc install spineplot
spineplot foreign rep78</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="img4/x4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="img4/x4.png" class="img-fluid figure-img"></a></p>
</figure>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../formation/chapitre3.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Le langage Stata</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../formation/chapitre5.html" class="pagination-link">
        <span class="nav-page-text">Les variables</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Marc Thévenin - Ined-Sms - Août 2022</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","loop":true,"selector":".lightbox","descPosition":"bottom","openEffect":"zoom"});</script>



</body></html>